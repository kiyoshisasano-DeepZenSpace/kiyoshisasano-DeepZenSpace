{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PLD Bridge Hub â€” Event Template",
  "description": "Unified event format for PLD Bridge Hub telemetry and adaptive operations.",
  "type": "object",
  "required": [
    "event_type",
    "timestamp",
    "session_id",
    "metadata"
  ],
  "properties": {
    "event_type": {
      "type": "string",
      "enum": [
        "pause_detected",
        "reentry_detected",
        "latency_hold",
        "alignment_pulse",
        "repair_triggered",
        "repair_failed",
        "resonance_state",
        "ethics_violation",
        "audit_log"
      ],
      "description": "Defines the kind of structural or operational event."
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "UTC ISO8601 timestamp of the event."
    },
    "session_id": {
      "type": "string",
      "description": "Unique identifier for the session or user interaction context."
    },
    "source_module": {
      "type": "string",
      "description": "Name of the originating module (e.g., pause_classifier, latency_tracker)."
    },
    "phase_context": {
      "type": "string",
      "enum": [
        "D",
        "R",
        "L3",
        "R5",
        "Meta"
      ],
      "description": "PLD phase context associated with this event."
    },
    "metadata": {
      "type": "object",
      "description": "Event-specific attributes and contextual data.",
      "properties": {
        "reason": {
          "type": "string"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "duration_ms": {
          "type": "number",
          "minimum": 0
        },
        "latency_ms": {
          "type": "number",
          "minimum": 0
        },
        "correction_ms": {
          "type": "number"
        },
        "status": {
          "type": "string"
        },
        "user_cancelled": {
          "type": "boolean"
        },
        "matching_segment": {
          "type": "string"
        },
        "drift_value": {
          "type": "number"
        },
        "resonance_confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      },
      "additionalProperties": true
    },
    "integrity": {
      "type": "object",
      "description": "Governance-related attributes ensuring traceability and authenticity.",
      "properties": {
        "verified_by": {
          "type": "string"
        },
        "approved": {
          "type": "boolean"
        },
        "signature_hash": {
          "type": "string"
        },
        "revision_id": {
          "type": "string"
        }
      },
      "required": [
        "approved"
      ],
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "event_type": "alignment_pulse",
      "timestamp": "2025-10-14T10:45:12Z",
      "session_id": "sess_demo_012",
      "source_module": "resonance_controller",
      "phase_context": "R5",
      "metadata": {
        "reason": "resonance_drift",
        "correction_ms": 120,
        "resonance_confidence": 0.55,
        "status": "corrected"
      },
      "integrity": {
        "verified_by": "SafetyOfficer42",
        "approved": true,
        "signature_hash": "f8a93c1d7d1b6a...",
        "revision_id": "v1.0.3"
      }
    }
  ]
}