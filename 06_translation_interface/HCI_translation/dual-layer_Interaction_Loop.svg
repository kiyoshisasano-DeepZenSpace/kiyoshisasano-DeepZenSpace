<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Dual-Layer Interaction Loop: Rhythm and Transparency</title>
  <desc>Two stacked layers show interaction rhythm (cue, silence, segment, drift, repair) and epistemic transparency (confidence display, hedging, calibration, user trust) connected by bidirectional feedback arrows.</desc>
  
  <style>
    .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #2c3e50; }
    .label { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
    .layer-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
    .legend { font-family: Arial, sans-serif; font-size: 11px; fill: #2c3e50; }
    .small-label { font-family: Arial, sans-serif; font-size: 10px; fill: #2c3e50; }
  </style>
  
  <!-- 背景 -->
  <rect width="100%" height="100%" fill="#f8f9fa"/>
  
  <!-- タイトル -->
  <text x="320" y="30" text-anchor="middle" class="title">Figure 1: Dual-Layer Interaction Loop</text>
  
  <!-- メインの相互作用ループ -->
  <g transform="translate(320, 200)">
    <!-- 上層: Interaction Rhythm -->
    <rect x="-180" y="-120" width="360" height="80" fill="none" stroke="#e67e22" stroke-width="2"/>
    <text x="-170" y="-105" class="layer-title" fill="#e67e22">Layer A: Interaction Rhythm</text>
    
    <!-- 下層: Epistemic Transparency -->
    <rect x="-180" y="40" width="360" height="80" fill="none" stroke="#2980b9" stroke-width="2"/>
    <text x="-170" y="55" class="layer-title" fill="#2980b9">Layer B: Epistemic Transparency</text>
    
    <!-- リズム層の要素 -->
    <g>
      <!-- Cue -->
      <circle cx="-120" y="-80" r="6" fill="#e67e22"/>
      <text x="-120" y="-65" text-anchor="middle" class="label">Cue</text>
      
      <!-- Silence -->
      <circle cx="-40" y="-80" r="6" fill="#e67e22"/>
      <text x="-40" y="-65" text-anchor="middle" class="label">Silence</text>
      
      <!-- Segment -->
      <circle cx="40" y="-80" r="6" fill="#e67e22"/>
      <text x="40" y="-65" text-anchor="middle" class="label">Segment</text>
      
      <!-- Drift -->
      <circle cx="120" y="-80" r="6" fill="#e67e22"/>
      <text x="120" y="-65" text-anchor="middle" class="label">Drift</text>
      
      <!-- Repair -->
      <circle cx="0" y="-100" r="6" fill="#e67e22"/>
      <text x="0" y="-115" text-anchor="middle" class="label">Repair</text>
    </g>
    
    <!-- 透明性層の要素 -->
    <g>
      <!-- Confidence display -->
      <circle cx="-90" y="80" r="6" fill="#2980b9"/>
      <text x="-90" y="95" text-anchor="middle" class="label">Confidence</text>
      <text x="-90" y="107" text-anchor="middle" class="small-label">display</text>
      
      <!-- Hedging -->
      <circle cx="-30" y="80" r="6" fill="#2980b9"/>
      <text x="-30" y="95" text-anchor="middle" class="label">Hedging</text>
      
      <!-- Calibration -->
      <circle cx="30" y="80" r="6" fill="#2980b9"/>
      <text x="30" y="95" text-anchor="middle" class="label">Calibration</text>
      
      <!-- User trust -->
      <circle cx="90" y="80" r="6" fill="#2980b9"/>
      <text x="90" y="95" text-anchor="middle" class="label">User trust</text>
    </g>
    
    <!-- 層間の双方向矢印（太め） -->
    <g>
      <!-- Rhythm → Transparency -->
      <path d="M 0 -40 L 0 40" stroke="#8e44ad" stroke-width="3" fill="none">
        <marker markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" markerUnits="strokeWidth">
          <polygon points="0 0, 10 3.5, 0 7" fill="#8e44ad"/>
        </marker>
      </path>
      
      <!-- Transparency → Rhythm -->
      <path d="M 20 40 L 20 -40" stroke="#8e44ad" stroke-width="3" fill="none">
        <marker markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" markerUnits="strokeWidth">
          <polygon points="0 0, 10 3.5, 0 7" fill="#8e44ad"/>
        </marker>
      </path>
      
      <text x="25" y="0" text-anchor="start" class="small-label" fill="#8e44ad">Temporal</text>
      <text x="25" y="12" text-anchor="start" class="small-label" fill="#8e44ad">Transparency</text>
      <text x="25" y="24" text-anchor="start" class="small-label" fill="#8e44ad">Feedback Loop</text>
    </g>
    
    <!-- 層内の矢印（細め） -->
    <g>
      <!-- Rhythm層内の流れ -->
      <path d="M -114 -80 L -46 -80" stroke="#e67e22" stroke-width="2" fill="none"/>
      <path d="M -34 -80 L 34 -80" stroke="#e67e22" stroke-width="2" fill="none"/>
      <path d="M 46 -80 L 114 -80" stroke="#e67e22" stroke-width="2" fill="none"/>
      
      <!-- Repairへの接続 -->
      <path d="M -40 -86 L 0 -94" stroke="#e67e22" stroke-width="1" fill="none" stroke-dasharray="2,2"/>
      <path d="M 40 -86 L 0 -94" stroke="#e67e22" stroke-width="1" fill="none" stroke-dasharray="2,2"/>
      
      <!-- Transparency層内の流れ -->
      <path d="M -84 80 L -36 80" stroke="#2980b9" stroke-width="2" fill="none"/>
      <path d="M -24 80 L 24 80" stroke="#2980b9" stroke-width="2" fill="none"/>
      <path d="M 36 80 L 84 80" stroke="#2980b9" stroke-width="2" fill="none"/>
    </g>
    
    <!-- Resonant Closure (Rhythm層右側) -->
    <g transform="translate(140, -80)">
      <circle r="15" fill="none" stroke="#e67e22" stroke-width="1"/>
      <path d="M -8 -8 L 8 8 M -8 8 L 8 -8" stroke="#e67e22" stroke-width="1"/>
      <text x="0" y="30" text-anchor="middle" class="small-label">Resonant</text>
      <text x="0" y="40" text-anchor="middle" class="small-label">closure</text>
    </g>
    
    <!-- TAI (Transparency層右下) -->
    <g transform="translate(140, 80)">
      <rect x="-20" y="-8" width="40" height="16" rx="3" fill="#2980b9" opacity="0.1" stroke="#2980b9" stroke-width="1"/>
      <text x="0" y="4" text-anchor="middle" class="small-label">TAI</text>
      <text x="0" y="16" text-anchor="middle" class="small-label" font-size="8">(Trust Alignment)</text>
    </g>
  </g>
  
  <!-- 凡例 -->
  <g transform="translate(20, 420)">
    <line x1="0" y1="0" x2="20" y2="0" stroke="#e67e22" stroke-width="2"/>
    <text x="25" y="4" class="legend">Rhythm layer (intra-layer)</text>
    
    <line x1="160" y1="0" x2="180" y2="0" stroke="#2980b9" stroke-width="2"/>
    <text x="185" y="4" class="legend">Transparency layer (intra-layer)</text>
    
    <line x1="340" y1="0" x2="360" y2="0" stroke="#8e44ad" stroke-width="3"/>
    <text x="365" y="4" class="legend">Inter-layer coupling</text>
  </g>
</svg>
